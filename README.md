# Overview

Simple Lapis project to play with the idea of processing SVD files into visualized documentation of a microcontroller's register layout.

The first step would be uploading and parsing the SVD files, then printing the parsed items for verification. I think that the Rust `svd2rust` project may be a good place to start learning about how to parse SVDs.

For now, javascript will be required to use the web pages generated by this framework. I might look into removing that requirement later on, but it is just too convenient for prototyping.

# Notes

This project relies on the `bit32` library for bitwise operations. It was introduced in Lua v5.2, but you can install a backport for v5.1 (which LuaJIT uses) with:

`luarocks install bit32`

The Postgres database connection may require the `luacrypto` package for (I believe) md5 hashing, and `luacrypto` is not listed in the Lapis dependency files. To install it:

`luarocks install luacrypto`

If you run into compilation errors, try building with OpenSSL v1.0.x by installing the appropriate development libraries. On Debian/Ubuntu/etc:

`sudo apt-get install libssl-1.0-dev`

The default `postgres` database user should be created automatically when you install Postgres, but you will need to update its password. Log in as the `postgres` OS user, enter the postgres shell (`psql`), and then enter `\password postgres;` to update the `postgres` database user's password. Note that the configuration in `config.lua` refers to the *database* user called `postgres`, not the *operating system* user. You might want to create a new database user with a different name to avoid that confusion.

You'll also need to run `cargo build` in the `static/rust/svd_reader` directory for the web app to work properly, and you need the Rust language and toolchain for that; for installation instructions, see:

https://www.rust-lang.org/tools/install
